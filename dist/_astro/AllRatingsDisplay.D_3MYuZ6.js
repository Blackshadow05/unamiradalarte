import{j as e}from"./jsx-runtime.TBa3i5EZ.js";import{r as n}from"./index.CVf8TyFT.js";import{r as k}from"./supabase.CAKu8NRT.js";function A(){const[r,x]=n.useState([]),[g,h]=n.useState(!0),[d,o]=n.useState("all"),[c,f]=n.useState("newest"),u={1:"Susurros del Alma",2:"Danza de Colores",3:"Reflexiones Urbanas",4:"Serenidad Azul",5:"Fuego Interior",6:"Naturaleza Abstracta",7:"Osito Dulce",8:"Conejito Primaveral",9:"Gatito Mimoso"};n.useEffect(()=>{p()},[]);const p=async()=>{try{const s=(await k.getAllRatings()).map(a=>({...a,artwork_title:u[a.artwork_id]||`Obra ${a.artwork_id}`}));x(s)}catch(t){console.error("Error loading ratings:",t)}finally{h(!1)}},y=()=>{let t=[...r];switch(d){case"verified":t=t.filter(s=>s.verified);break;case"5-stars":t=t.filter(s=>s.rating===5);break}switch(c){case"newest":t.sort((s,a)=>new Date(a.created_at).getTime()-new Date(s.created_at).getTime());break;case"oldest":t.sort((s,a)=>new Date(s.created_at).getTime()-new Date(a.created_at).getTime());break;case"rating-high":t.sort((s,a)=>a.rating-s.rating);break;case"rating-low":t.sort((s,a)=>s.rating-a.rating);break}return t},v=t=>Array.from({length:5},(s,a)=>e.jsx("span",{className:`text-yellow-400 ${a<t?"opacity-100":"opacity-30"}`,children:"★"},a)),b=t=>new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"long",day:"numeric"}).format(new Date(t)),j=()=>{const t=r.length,s=r.filter(l=>l.verified).length,a=r.filter(l=>l.rating===5).length,N=r.length>0?r.reduce((l,w)=>l+w.rating,0)/r.length:0;return{total:t,verified:s,fiveStars:a,average:N}};if(g)return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((t,s)=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 art-shadow animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded"})]},s))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:9}).map((t,s)=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 art-shadow animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]},s))})]});const i=j(),m=y();return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 art-shadow text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:i.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Calificaciones"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 art-shadow text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:i.average.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Promedio General"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 art-shadow text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:i.fiveStars}),e.jsx("div",{className:"text-sm text-gray-600",children:"Calificaciones 5★"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 art-shadow text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:i.verified}),e.jsx("div",{className:"text-sm text-gray-600",children:"Reseñas Verificadas"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 art-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 mr-2",children:"Filtrar:"}),e.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Todas (",r.length,")"]}),e.jsxs("button",{onClick:()=>o("verified"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d==="verified"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Verificadas (",i.verified,")"]}),e.jsxs("button",{onClick:()=>o("5-stars"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d==="5-stars"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["5 Estrellas (",i.fiveStars,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ordenar:"}),e.jsxs("select",{value:c,onChange:t=>f(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"newest",children:"Más Recientes"}),e.jsx("option",{value:"oldest",children:"Más Antiguas"}),e.jsx("option",{value:"rating-high",children:"Mayor Calificación"}),e.jsx("option",{value:"rating-low",children:"Menor Calificación"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((t,s)=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 art-shadow hover:shadow-xl transition-all duration-300 transform hover:scale-105",style:{animationDelay:`${s*.1}s`,animation:"fade-in-scale 0.6s ease-out both"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center text-sm",children:v(t.rating)}),t.verified&&e.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-medium",children:"✓ Verificado"})]}),t.comment&&e.jsxs("blockquote",{className:"text-gray-700 text-sm leading-relaxed mb-4 italic",children:['"',t.comment,'"']}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.user_name}),e.jsx("p",{className:"text-primary-600 font-medium",children:t.artwork_title})]}),e.jsx("p",{children:b(t.created_at)})]})]},t.id))}),m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"⭐"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No hay calificaciones"}),e.jsx("p",{className:"text-gray-500",children:"No se encontraron calificaciones con los filtros seleccionados."})]}),e.jsx("div",{className:"text-center pt-8",children:e.jsxs("a",{href:"/",className:"inline-flex items-center px-6 py-3 border-2 border-primary-600 text-primary-600 font-semibold rounded-2xl hover:bg-primary-600 hover:text-white transition-all duration-300",children:[e.jsx("svg",{className:"mr-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver al Inicio"]})})]})}export{A as default};
